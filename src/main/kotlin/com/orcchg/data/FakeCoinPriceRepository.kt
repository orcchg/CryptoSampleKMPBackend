package com.orcchg.data

import com.orcchg.domain.model.Money
import com.orcchg.domain.model.PricedCoin
import com.orcchg.domain.model.money
import com.orcchg.util.getCoinByIndexOrNull
import kotlin.random.Random

internal data class PriceAndDelta(
    val price: Double,
    val delta: Double = 0.0
) {
    companion object {
        fun withRandomDelta(
            price: Double,
            deltaPercentage: Double = 5.0,
            rng: Random = Random.Default
        ): PriceAndDelta =
            PriceAndDelta(price = price, delta = rng.nextDouble(0.0, price * deltaPercentage / 100.0))
    }
}

internal class FakeCoinPriceRepository : CoinPriceRepository {

    override suspend fun getPrice(index: Long): PricedCoin? =
        getCoinByIndexOrNull(index = index)?.let { coin ->
            val priceAndDelta = getFakeCoinPriceAndDeltaByIndexOrNull(index = index)
            PricedCoin(
                coin = coin,
                price = priceAndDelta?.price?.money(scale = 10) ?: Money.ZERO,
                delta = priceAndDelta?.delta?.money(scale = 10) ?: Money.ZERO
            )
        }

    private fun getFakeCoinPriceAndDeltaByIndexOrNull(index: Long): PriceAndDelta? =
        when (index) {
            0L -> PriceAndDelta.withRandomDelta(price = 57881.60)
            2L -> PriceAndDelta.withRandomDelta(price = 65.25)
            3L -> PriceAndDelta.withRandomDelta(price = 0.11)
            5L -> PriceAndDelta.withRandomDelta(price = 23.39)
            14L -> PriceAndDelta.withRandomDelta(price = 0.3492)
            17L -> PriceAndDelta.withRandomDelta(price = 0.2534)
            20L -> PriceAndDelta.withRandomDelta(price = 0.0074)
            22L -> PriceAndDelta.withRandomDelta(price = 0.28)
            42L -> PriceAndDelta.withRandomDelta(price = 13.2)
            57L -> PriceAndDelta.withRandomDelta(price = 0.09816)
            60L -> PriceAndDelta.withRandomDelta(price = 3050.92)
            61L -> PriceAndDelta.withRandomDelta(price = 21.09)
            74L -> PriceAndDelta.withRandomDelta(price = 0.159018)
            77L -> PriceAndDelta.withRandomDelta(price = 0.0038)
            118L -> PriceAndDelta.withRandomDelta(price = 5.89)
            119L -> PriceAndDelta.withRandomDelta(price = 0.2194)
            121L -> PriceAndDelta.withRandomDelta(price = 9.68)
            133L -> PriceAndDelta.withRandomDelta(price = 16.66)
            136L -> PriceAndDelta.withRandomDelta(price = 1.040561)
            137L -> PriceAndDelta.withRandomDelta(price = 0.0674)
            141L -> PriceAndDelta.withRandomDelta(price = 0.268981)
            144L -> PriceAndDelta.withRandomDelta(price = 0.44)
            145L -> PriceAndDelta.withRandomDelta(price = 342.66)
            146L -> PriceAndDelta.withRandomDelta(price = 0.0085)
            148L -> PriceAndDelta.withRandomDelta(price = 0.087013)
            156L -> PriceAndDelta.withRandomDelta(price = 22.73)
            165L -> PriceAndDelta.withRandomDelta(price = 6.95)
            169L -> PriceAndDelta.withRandomDelta(price = 0.986736)
            175L -> PriceAndDelta.withRandomDelta(price = 0.01719)
            178L -> PriceAndDelta.withRandomDelta(price = 0.017173)
            194L -> PriceAndDelta.withRandomDelta(price = 0.52)
            195L -> PriceAndDelta.withRandomDelta(price = 0.13)
            204L -> PriceAndDelta.withRandomDelta(price = 0.000377)
            223L -> PriceAndDelta.withRandomDelta(price = 7.19)
            235L -> PriceAndDelta.withRandomDelta(price = 0.019799)
            242L -> PriceAndDelta.withRandomDelta(price = 0.001465)
            283L -> PriceAndDelta.withRandomDelta(price = 0.134893)
            291L -> PriceAndDelta.withRandomDelta(price = 0.005293)
            304L -> PriceAndDelta.withRandomDelta(price = 0.03633)
            309L -> PriceAndDelta.withRandomDelta(price = 0.009473)
            313L -> PriceAndDelta.withRandomDelta(price = 0.015131)
            330L -> PriceAndDelta.withRandomDelta(price = 0.000068)
            354L -> PriceAndDelta.withRandomDelta(price = 5.484844)
            361L -> PriceAndDelta.withRandomDelta(price = 0.063829)
            394L -> PriceAndDelta.withRandomDelta(price = 0.085949)
            396L -> PriceAndDelta.withRandomDelta(price = 0.05114)
            397L -> PriceAndDelta.withRandomDelta(price = 4.67)
            425L -> PriceAndDelta.withRandomDelta(price = 0.00172)
            434L -> PriceAndDelta.withRandomDelta(price = 20.4)
            457L -> PriceAndDelta.withRandomDelta(price = 0.026129)
            459L -> PriceAndDelta.withRandomDelta(price = 0.372)
            461L -> PriceAndDelta.withRandomDelta(price = 3.73)
            474L -> PriceAndDelta.withRandomDelta(price = 0.08242)
            483L -> PriceAndDelta.withRandomDelta(price = 0.181211)
            494L -> PriceAndDelta.withRandomDelta(price = 0.998406)
            500L -> PriceAndDelta.withRandomDelta(price = 1.279721)
            501L -> PriceAndDelta.withRandomDelta(price = 133.58)
            508L -> PriceAndDelta.withRandomDelta(price = 33.23)
            529L -> PriceAndDelta.withRandomDelta(price = 0.24334)
            564L -> PriceAndDelta.withRandomDelta(price = 0.068189)
            607L -> PriceAndDelta.withRandomDelta(price = 7.563133)
            637L -> PriceAndDelta.withRandomDelta(price = 5.74)
            714L -> PriceAndDelta.withRandomDelta(price = 0.003401)
            784L -> PriceAndDelta.withRandomDelta(price = 0.6809)
            787L -> PriceAndDelta.withRandomDelta(price = 0.056667)
            818L -> PriceAndDelta.withRandomDelta(price = 0.024134)
            820L -> PriceAndDelta.withRandomDelta(price = 0.0001781)
            888L -> PriceAndDelta.withRandomDelta(price = 9.64)
            889L -> PriceAndDelta.withRandomDelta(price = 0.277124)
            899L -> PriceAndDelta.withRandomDelta(price = 0.00003)
            931L -> PriceAndDelta.withRandomDelta(price = 3.38)
            966L -> PriceAndDelta.withRandomDelta(price = 0.4939)
            996L -> PriceAndDelta.withRandomDelta(price = 11.41)
            999L -> PriceAndDelta.withRandomDelta(price = 0.052878)
            1001L -> PriceAndDelta.withRandomDelta(price = 0.002875)
            1023L -> PriceAndDelta.withRandomDelta(price = 0.01251)
            1024L -> PriceAndDelta.withRandomDelta(price = 0.173042)
            1030L -> PriceAndDelta.withRandomDelta(price = 0.131607)
            1729L -> PriceAndDelta.withRandomDelta(price = 0.71)
            1815L -> PriceAndDelta.withRandomDelta(price = 0.37)
            1890L -> PriceAndDelta.withRandomDelta(price = 0.02496)
            2301L -> PriceAndDelta.withRandomDelta(price = 2.49)
            2718L -> PriceAndDelta.withRandomDelta(price = 0.005003)
            3030L -> PriceAndDelta.withRandomDelta(price = 0.06725)
            4200L -> PriceAndDelta.withRandomDelta(price = 0.2288)
            5000L -> PriceAndDelta.withRandomDelta(price = 0.642251)
            5600L -> PriceAndDelta.withRandomDelta(price = 0.000024)
            6001L -> PriceAndDelta.withRandomDelta(price = 0.377327)
            6060L -> PriceAndDelta.withRandomDelta(price = 0.003164)
            7332L -> PriceAndDelta.withRandomDelta(price = 0.5931)
            8453L -> PriceAndDelta.withRandomDelta(price = 0.000002)
            8964L -> PriceAndDelta.withRandomDelta(price = 0.263186)
            14001L -> PriceAndDelta.withRandomDelta(price = 0.033288)
            18000L -> PriceAndDelta.withRandomDelta(price = 0.798)
            19167L -> PriceAndDelta.withRandomDelta(price = 0.5336)
            52752L -> PriceAndDelta.withRandomDelta(price = 0.470974)
            59144L -> PriceAndDelta.withRandomDelta(price = 0.9995)
            105105L -> PriceAndDelta.withRandomDelta(price = 0.0395)
            534352L -> PriceAndDelta.withRandomDelta(price = 0.000015)
            810180L -> PriceAndDelta.withRandomDelta(price = 0.9993)
            5718350L -> PriceAndDelta.withRandomDelta(price = 0.16)
            5741564L -> PriceAndDelta.withRandomDelta(price = 0.939017)
            10000025L -> PriceAndDelta.withRandomDelta(price = 0.085523)
            10000060L -> PriceAndDelta.withRandomDelta(price = 19.28)
            10000070L -> PriceAndDelta.withRandomDelta(price = 1.674657)
            10000100L -> PriceAndDelta.withRandomDelta(price = 240.79)
            10000118L -> PriceAndDelta.withRandomDelta(price = 0.4577)
            10000145L -> PriceAndDelta.withRandomDelta(price = 0.00001803)
            10000250L -> PriceAndDelta.withRandomDelta(price = 0.4587)
            10000288L -> PriceAndDelta.withRandomDelta(price = 0.22645)
            10000321L -> PriceAndDelta.withRandomDelta(price = 1.01)
            10000324L -> PriceAndDelta.withRandomDelta(price = 0.161959)
            10000330L -> PriceAndDelta.withRandomDelta(price = 0.35)
            10000553L -> PriceAndDelta.withRandomDelta(price = 0.460996)
            10000787L -> PriceAndDelta.withRandomDelta(price = 0.0683)
            10000990L -> PriceAndDelta.withRandomDelta(price = 0.09612)
            10001088L -> PriceAndDelta.withRandomDelta(price = 35.59)
            10001101L -> PriceAndDelta.withRandomDelta(price = 0.9981)
            10001284L -> PriceAndDelta.withRandomDelta(price = 0.192502)
            10001285L -> PriceAndDelta.withRandomDelta(price = 8.87)
            10002020L -> PriceAndDelta.withRandomDelta(price = 1.73)
            10002222L -> PriceAndDelta.withRandomDelta(price = 0.372)
            10004689L -> PriceAndDelta.withRandomDelta(price = 0.04)
            10007000L -> PriceAndDelta.withRandomDelta(price = 0.631711)
            10007700L -> PriceAndDelta.withRandomDelta(price = 0.0006019)
            10008217L -> PriceAndDelta.withRandomDelta(price = 0.145814)
            10009000L -> PriceAndDelta.withRandomDelta(price = 26.91)
            10009001L -> PriceAndDelta.withRandomDelta(price = 0.027171)
            10042170L -> PriceAndDelta.withRandomDelta(price = 1.01)
            10042221L -> PriceAndDelta.withRandomDelta(price = 0.6905)
            11000118L -> PriceAndDelta.withRandomDelta(price = 0.02328)
            12000118L -> PriceAndDelta.withRandomDelta(price = 1.24)
            13000118L -> PriceAndDelta.withRandomDelta(price = 0.05542)
            14000118L -> PriceAndDelta.withRandomDelta(price = 0.001598)
            15000118L -> PriceAndDelta.withRandomDelta(price = 0.043156)
            16000118L -> PriceAndDelta.withRandomDelta(price = 0.1799)
            17000118L -> PriceAndDelta.withRandomDelta(price = 3.61)
            18000118L -> PriceAndDelta.withRandomDelta(price = 0.0000223)
            19000118L -> PriceAndDelta.withRandomDelta(price = 0.2829)
            20000118L -> PriceAndDelta.withRandomDelta(price = 0.01095)
            20000714L -> PriceAndDelta.withRandomDelta(price = 502.71)
            20007000L -> PriceAndDelta.withRandomDelta(price = 0.714361)
            20009001L -> PriceAndDelta.withRandomDelta(price = 0.03007218)
            21000118L -> PriceAndDelta.withRandomDelta(price = 5.52)
            22000118L -> PriceAndDelta.withRandomDelta(price = 1.29)
            30000118L -> PriceAndDelta.withRandomDelta(price = 0.107829)
            30000714L -> PriceAndDelta.withRandomDelta(price = 0.00001954)
            40000118L -> PriceAndDelta.withRandomDelta(price = 1.13)
            50000118L -> PriceAndDelta.withRandomDelta(price = 0.6136)
            60000118L -> PriceAndDelta.withRandomDelta(price = 0.0001023)
            70000118L -> PriceAndDelta.withRandomDelta(price = 1.11)
            80000118L -> PriceAndDelta.withRandomDelta(price = 0.01046)
            90000118L -> PriceAndDelta.withRandomDelta(price = 0.355908)
            245022934L -> PriceAndDelta.withRandomDelta(price = 0.435973)
            1323161554L -> PriceAndDelta.withRandomDelta(price = 0.131338)
            else -> null
        }
}
